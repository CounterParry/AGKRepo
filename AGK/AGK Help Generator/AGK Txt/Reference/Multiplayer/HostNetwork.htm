<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>HostNetwork - AGK Help</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="../../main.js"></script>
<script type="text/javascript">var commandName = "HostNetwork";</script>
<link href="../../main.css" rel="styleSheet" type="text/css" /><script type="text/javascript">window.addEventListener("message", receiveMessage, false);function receiveMessage(event){if( event.origin !== 'http://www.appgamekit.com' && event.origin !== 'https://www.appgamekit.com' && event.origin !== 'http://appgamekit.com' && event.origin !== 'https://appgamekit.com' && event.origin !== 'http://agk.thegamecreators.com' && event.origin !== 'https://agk.thegamecreators.com' ) return;document.getElementById('comments').style.height = (parseInt(event.data))+'px'; document.getElementById('comments').scrolling='no';}</script>
<script type="text/javascript" src="https://www.appgamekit.com/assets/js/docs-jquery.min.js"></script><script type="text/javascript" src="https://www.appgamekit.com/assets/js/docs-translate.js"></script></head>
<body>
<div class="header" style="background: #000 url('../../gfx/header-back.png') top center no-repeat;"><div><div class="navigation"><a href="../../home.html"><img src="../../gfx/b-home.png" width="76" height="44" alt=""></a><a href="javascript:history.go(-1)"><img src="../../gfx/b-back.png" width="71" height="44" alt=""></a><a href="javascript:window.print()"><img src="../../gfx/b-print.png" width="75" height="44" alt=""></a><a style="cursor:pointer;" onclick="ToggleCPP()"><img src="../../gfx/lang-c.png" width="253" height="44" alt=""  id="basicCodeBlock0" border="0"></a><a style="cursor:pointer;" onclick="ToggleCPP()"><img src="../../gfx/lang-basic.png" width="253" height="44" alt=""  id="cppCodeBlock0" style="display:none" border="0"></a></div><a href="https://www.appgamekit.com" target="_blank"><img class="logo" src="../../gfx/agk-logo.png" height="44" style="margin:15px 0" alt="App Game Kit" border="0"></a></div><img src="../../gfx/drop-shadow.png" width="1158" height="40" alt=""></div><div class="breadcrumbs">
<a href="../../home.html">Home</a> &gt; <a href="../../commands.html">Commands</a> &gt; <a href="../Multiplayer.htm">Multiplayer</a> &gt; HostNetwork</div><div class="page"><h1>HostNetwork</h1><h2>Description</h2><p>Creates an AGK network with this app as the controller, this app is added as the first client to the network. AGK networks are identified by name and are automatically broadcast to anyone listening on the local area network, meaning that other AGK apps on the LAN can pick up all broadcast networks, display their names to their users and allow them to choose one to join. AGK apps outside the LAN need the IP address and port of the hoster to join the network, this port will need forwarding to the host through any intervening firewall. The port value must be between 1025 and 65535, and will fail if another application is already listening on that port.<br><br> Warning, if the device hosting the network is an iOS device then the broadcasting part of this process will fail unless you get permission from Apple to send broadcast packets, see the following page to request permission https: developer.apple.com/contact/request/networking-multicast. If you do not have the permission then devices should still be able to join such a network if they have the IP address and port of the hosting device<br/><br/> You must also specify a client name to use to identify your client, all client names must be unique. This name will be visible to all other clients. Clients will be added to the network automatically and can be counted using <i>GetNetworkNumClients</i>. You can call <i>IsNetworkActive</i> immediately after this command to check that the network was setup successfully, once setup the network will not become inactive for a hoster.<br><br> Once connected the app becomes a client of the network, any other clients that connect to it join the network. All clients are treated equally and have a list of local variables that they can read from and write to, all clients can also read any variables on other clients on a read only basis.<br><br> Some ports are used by AGK for internal networking and should not be used by your application. Ports 5689-5692 are used to manage apps broadcast from the IDE. Ports 45631 and 45632 are used for named network connections. On IPv4 networks the network broadcast goes to all devices on the local subnet, on IPv6 networks the broadcast goes to the AGK multicast address "FF02::41:474B". If the device has both IPv4 and IPv6 IP addresses then <i>HostNetwork</i> will accept connections from both IPv4 and IPv6 networks.<br><br> If you specify 0 for the port then it will disable IPv4 connections, if you set portv6 to 0 then it will disable IPv6 connections. At least one must be greater than 0 or an error will be generated. If you do not specify portv6 at all then it will be set to 0. It should be safe to use the same port for both IPv4 and IPv6, but this hasn't been widely tested.<br/><br/> Returns an ID you can use to interact with this network.<br><br> Does not work when exported to HTML5 </p><h2>Definition</h2><div id="basicCodeBlock1" class="basiccode"><p>integer HostNetwork(  szNetworkName,  szMyName, port, portv6 ) </p></div><div id="cppCodeBlock2" style="display:none" class="cppcode"><p>uint32_t agk::HostNetwork( const char *szNetworkName, const char *szMyName, int port, int portv6 )</p></div><div id="basicCodeBlock3" class="basiccode"><p>integer HostNetwork(  szNetworkName,  szMyName, port ) </p></div><div id="cppCodeBlock4" style="display:none" class="cppcode"><p>uint32_t agk::HostNetwork( const char *szNetworkName, const char *szMyName, int port )</p></div><h2>Parameters</h2><ul><li><i>szNetworkName</i> - The name to use in identifying this network.</li><li><i>szMyName</i> - The name to use in identifying this client.</li><li><i>port</i> - The port that other clients should use to connect to this network when using IPv4, 0 to disable IPv4 connections.</li><li><i>portv6</i> - The port that other clients should use to connect to this network when using IPv6, 0 to disable IPv6 connections.</li></ul><br><br><div style="height:2px;width:100%;border-bottom:1px solid #b0b0b0;margin:0px auto 10px auto;padding:0px;"> </div><iframe id="comments" style="width:700px;margin:0px auto;border:none" src="https://www.appgamekit.com/help/comments?command=HostNetwork"></iframe></div><div class="footer" style="background: #000 url('../../gfx/footer-back.png') top center no-repeat;"><div><p><a href="https://www.thegamecreators.com" target="_blank" style="float:none"><img style="float:right;margin-top:2px" src="../../gfx/tgc-logo.png" width="188" height="27" alt="" border="0"></a><br><strong>App Game Kit</strong> &nbsp;&copy; The Game Creators Ltd. All Rights Reserved.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="mailto:agkreports@thegamecreators.com" style="float:none"><font color="FFFFFF">Report an issue</font></a></p></p></div></div></body></html>